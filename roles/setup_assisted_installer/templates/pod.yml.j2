apiVersion: v1
kind: Pod
metadata:
  labels:
    app: assisted-installer
  name: assisted-installer
spec:
  containers:
    - args:
      - run-postgresql
      image: "{{ assisted_postgres_image }}"
      name: db
      envFrom:
      - configMapRef:
          name: config
    - image: "{{ assisted_service_gui_image }}"
      name: ui
      ports:
      - hostPort: 8080
      envFrom:
      - configMapRef:
          name: config
    - image: "{{ assisted_service_image_service_image }}"
      name: image-service
      ports:
      - hostPort: 8888
      envFrom:
      - configMapRef:
          name: config
    - image: "{{ assisted_service_image }}"
      name: service
      ports:
      - hostPort: 8090
      envFrom:
      - configMapRef:
          name: config
  restartPolicy: Never
  {% if (dns_servers | length) > 0 %}
  dnsConfig:
    nameservers:
      {% for server in dns_servers %}
      - {{ server }}
      {% endfor %}
  {% endif %}